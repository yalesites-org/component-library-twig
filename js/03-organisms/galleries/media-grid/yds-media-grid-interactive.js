Drupal.behaviors.mediaGridInteractive={attach(e){const t=e.querySelectorAll('.media-grid[data-media-grid-variation="interactive"]'),a=document.querySelector("body"),i="data-media-grid-modal-item-active",r="aria-current";t.forEach((e=>{const t=e.querySelectorAll(".media-grid__image"),d=e.querySelectorAll(".media-grid__maximize"),n=e.querySelector(".media-grid__modal"),c=e.querySelectorAll(".media-grid-modal__media"),o=e.querySelectorAll(".media-grid-modal__control"),l=e.querySelectorAll("[data-media-grid-item]").length,s=e.querySelectorAll(".media-grid-modal__pager-item:not(.media-grid-modal__pager-item--total)");let m,u,g;const h=t=>{const i="inactive"===t?"active":"inactive";e.setAttribute("data-media-grid-modal-state",i),"inactive"===i?(e.querySelector(`[data-media-grid-item="${m}"`).querySelector("button").focus(),a.removeAttribute("data-modal-active")):"active"===i&&((()=>{const e=n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=e[0],a=e[e.length-1];t.focus(),n.addEventListener("keydown",(e=>{("Tab"===e.key||9===e.keyCode)&&(e.shiftKey?document.activeElement===t&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),t.focus()))}))})(),a.setAttribute("data-modal-active","true"))},v=t=>{m=t;const a=e.querySelectorAll("[data-media-grid-modal-item]"),d=e.querySelectorAll(`[data-media-grid-modal-item="${t}"]`);a.forEach((e=>{e.removeAttribute(i)})),d.forEach((e=>{e.setAttribute(i,!0)})),(e=>{s.forEach(((t,a)=>{t.removeAttribute(r),e-1===a&&t.setAttribute(r,!0)}))})(m)};e.querySelectorAll(".media-grid-modal__content").forEach((e=>{const t=e.querySelector(".media-grid-modal__text"),i=e.querySelector(".media-grid-modal__toggle-caption"),r=e.querySelector(".media-grid-modal__heading");if(t){const d=100,n=t.textContent.trim();if(r&&(t.classList.add("media-grid-modal__text--has-heading"),e.classList.add("media-grid-modal__content--has-heading")),i&&n.length>d){const r=function(e,t){return e.length>t?e.slice(0,t):e}(n,d);t.textContent=`${r}...`,i.setAttribute("aria-expanded","false"),i.setAttribute("aria-label","expand"),i.style.setProperty("display","inline"),e.setAttribute("is-expanded","false"),e.style.setProperty("--modal-content-item-height",`${e.offsetHeight}px`),a.hasAttribute("gallery-has-click-event")||i.addEventListener("click",(function(a){a.preventDefault(),t.textContent===`${r}...`?(i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label","collapse"),t.textContent=n,e.setAttribute("is-expanded","true"),e.style.setProperty("--modal-content-item-height",`${e.scrollHeight}px`)):(i.setAttribute("aria-expanded","false"),i.setAttribute("aria-label","expand"),t.textContent=`${r}...`,e.setAttribute("is-expanded","false"),e.style.setProperty("--modal-content-item-height",`${e.offsetHeight}px`))}))}}}));const f=e=>{const t=Number(e.closest("[data-media-grid-item]").getAttribute("data-media-grid-item"));h("inactive"),v(t)},y=()=>{h("active")},b=()=>{v(m===l?1:m+1)},A=()=>{v(1===m?l:m-1)},_=()=>{g<u?b():g>u&&A()};n.addEventListener("touchstart",(e=>{u=e.changedTouches[0].screenX})),n.addEventListener("touchend",(e=>{g=e.changedTouches[0].screenX,_()})),c.forEach((e=>{const t=e;e.addEventListener("mousedown",(e=>{u=e.clientX})),e.addEventListener("mouseup",(e=>{g=e.clientX,_()})),t.ondragstart=()=>!1})),t.forEach((e=>{e.addEventListener("click",(()=>{f(e)}))})),d.forEach((e=>{e.addEventListener("click",(()=>{f(e)}))})),s.forEach(((e,t)=>{e.addEventListener("click",(()=>{(e=>{v(e)})(t+1)}))})),o.forEach((e=>{e.addEventListener("click",(()=>{switch(!0){case/--close/.test(e.className):y();break;case/--previous/.test(e.className):A();break;case/--next/.test(e.className):b()}}))})),e.addEventListener("click",(e=>{["media-grid-modal__inner","media-grid-modal__item"].some((t=>e.target.classList.contains(t)))&&y()})),e.addEventListener("keydown",(e=>{if(!e.defaultPrevented){switch(e.key){case"Esc":case"Escape":y();break;case"Left":case"ArrowLeft":A();break;case"Right":case"ArrowRight":b();break;default:return}e.preventDefault()}}),!0)}))}};