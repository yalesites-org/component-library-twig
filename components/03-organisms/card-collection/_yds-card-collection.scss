@use '../../00-tokens/tokens';
@use '../../00-tokens/functions/map';
@use '../../01-atoms/atoms';
@use '../grid-mixins' as grid;
@use '../list-mixins' as list;

$component-card-collection-themes: map.deep-get(
  tokens.$tokens,
  'component-themes'
);
$global-card-collection-themes: map.deep-get(tokens.$tokens, 'global-themes');

// The collection main wrapper.
.card-collection {
  @include tokens.spacing-page-section;

  .ys-view & {
    margin-block-start: 0;
  }

  // Component themes defaults: iterate over each component theme to establish
  // default variables.
  @each $theme, $value in $component-card-collection-themes {
    &[data-component-theme='#{$theme}'] {
      --color-card-collection-background: var(
        --component-themes-#{$theme}-background
      );
      --color-slot-one: var(--component-themes-#{$theme}-slot-one);
      --color-slot-two: var(--component-themes-#{$theme}-slot-two);
      --color-slot-three: var(--component-themes-#{$theme}-slot-three);
      --color-slot-four: var(--component-themes-#{$theme}-slot-four);
      --color-slot-five: var(--component-themes-#{$theme}-slot-five);
      --color-slot-six: var(--component-themes-#{$theme}-slot-six);
      --color-slot-seven: var(--component-themes-#{$theme}-slot-seven);
      --color-slot-eight: var(--component-themes-#{$theme}-slot-eight);
    }
  }

  // Global themes: set color slots for each theme
  @each $globalTheme, $value in $global-card-collection-themes {
    [data-global-theme='#{$globalTheme}'] & {
      --color-slot-one: var(--global-themes-#{$globalTheme}-colors-slot-one);
      --color-slot-two: var(--global-themes-#{$globalTheme}-colors-slot-two);
      --color-slot-three: var(
        --global-themes-#{$globalTheme}-colors-slot-three
      );
      --color-slot-four: var(--global-themes-#{$globalTheme}-colors-slot-four);
      --color-slot-five: var(--global-themes-#{$globalTheme}-colors-slot-five);
      --color-slot-six: var(--global-themes-#{$globalTheme}-colors-slot-six);
      --color-slot-seven: var(
        --global-themes-#{$globalTheme}-colors-slot-seven
      );
      --color-slot-eight: var(
        --global-themes-#{$globalTheme}-colors-slot-eight
      );
    }
  }
}

// The collection heading.
.card-collection__heading {
  @include tokens.heading(h2);

  margin-bottom: var(--size-spacing-7);
}

// The actual collection of cards.
.card-collection__cards {
  --card-collection-spacing: var(--spacing-component-gutter);

  .card-collection--limit & {
    max-width: var(--size-component-layout-width-content);
  }

  [data-collection-type='list'] & {
    @include list.primary;
  }

  [data-collection-type='grid'] & {
    align-items: flex-start;
  }

  [data-collection-type='profile-directory'] & {
    align-items: flex-start;
  }

  [data-collection-type='condensed'] & {
    margin-block-start: 0;
    padding-inline-start: 0;
  }

  [data-collection-type='single'] & {
    padding: 0;
  }

  [data-collection-type='single'][data-collection-featured='false'] & {
    padding-block-start: var(--size-spacing-11);
  }

  [data-collection-type='grid'][data-collection-featured='true'] & {
    @include grid.primary;
  }

  [data-collection-type='grid'][data-collection-featured='false'] & {
    @include grid.secondary;
  }

  [data-collection-type='grid'][data-component-width='content'] & {
    @include grid.quaternary;
  }

  [data-collection-type='profile-directory'][data-collection-featured='false']
    & {
    @include grid.directory-primary;
  }

  [data-collection-type='profile-directory'][data-collection-featured='true']
    & {
    @include grid.directory-secondary;
  }
}

// Component theme overrides for reference cards - only apply to single collection type
.card-collection[data-collection-type='single'][data-component-theme='one']
  .reference-card__content {
  background-color: var(--color-slot-one);
  color: var(--color-basic-white);

  --color-text-shadow: var(--color-slot-one);
}

.card-collection[data-collection-type='single'][data-component-theme='two']
  .reference-card__content {
  background-color: var(--color-slot-four);
  color: var(--color-gray-800);

  --color-text-shadow: var(--color-slot-four);
}

// Overline color overrides for themed reference cards
.card-collection[data-collection-type='single'][data-component-theme='one']
  .reference-card__overline {
  color: var(--color-basic-white);
}

.card-collection[data-collection-type='single'][data-component-theme='two']
  .reference-card__overline {
  color: var(--color-gray-800);
}

.card-collection[data-collection-type='single'][data-component-theme='three']
  .reference-card__overline {
  color: var(--color-basic-white);
}

.card-collection[data-collection-type='single'][data-component-theme='four']
  .reference-card__overline {
  color: var(--color-slot-seven);
}

.card-collection[data-collection-type='single'][data-component-theme='five']
  .reference-card__overline {
  color: var(--color-slot-eight);
}

// Date-time color overrides for themed reference cards (inside overline)
.card-collection[data-collection-type='single'][data-component-theme='one']
  .date-time {
  color: var(--color-basic-white);
}

.card-collection[data-collection-type='single'][data-component-theme='two']
  .date-time {
  color: var(--color-gray-800);
}

.card-collection[data-collection-type='single'][data-component-theme='three']
  .date-time {
  color: var(--color-basic-white);
}

.card-collection[data-collection-type='single'][data-component-theme='four']
  .date-time {
  color: var(--color-slot-seven);
}

.card-collection[data-collection-type='single'][data-component-theme='five']
  .date-time {
  color: var(--color-slot-eight);
}

.card-collection[data-collection-type='single'][data-component-theme='three']
  .reference-card__content {
  background-color: var(--color-slot-five);
  color: var(--color-basic-white);

  --color-text-shadow: var(--color-slot-five);
}

.card-collection[data-collection-type='single'][data-component-theme='four']
  .reference-card__content {
  background-color: var(--color-slot-three);
  color: var(--color-slot-seven);

  --color-text-shadow: var(--color-slot-three);
}

.card-collection[data-collection-type='single'][data-component-theme='five']
  .reference-card__content {
  background-color: var(--color-slot-two);
  color: var(--color-slot-eight);

  --color-text-shadow: var(--color-slot-two);
}

// Link colors for themed reference cards - only apply to single collection type
.card-collection[data-collection-type='single'][data-component-theme='one']
  .reference-card__content
  a {
  color: var(--color-basic-white);
}

.card-collection[data-collection-type='single'][data-component-theme='two']
  .reference-card__content
  a {
  color: var(--color-gray-800);
}

.card-collection[data-collection-type='single'][data-component-theme='three']
  .reference-card__content
  a {
  color: var(--color-basic-white);
}

.card-collection[data-collection-type='single'][data-component-theme='four']
  .reference-card__content
  a {
  color: var(--color-slot-seven);
}

.card-collection[data-collection-type='single'][data-component-theme='five']
  .reference-card__content
  a {
  color: var(--color-slot-eight);
}

// Link hover/focus states for themed reference cards - only apply to single collection type
.card-collection[data-collection-type='single'][data-component-theme='one']
  .reference-card__content
  a:hover,
.card-collection[data-collection-type='single'][data-component-theme='one']
  .reference-card__content
  a:focus {
  color: var(--color-slot-eight);
}

.card-collection[data-collection-type='single'][data-component-theme='two']
  .reference-card__content
  a:hover,
.card-collection[data-collection-type='single'][data-component-theme='two']
  .reference-card__content
  a:focus {
  color: var(--color-slot-one);
}

.card-collection[data-collection-type='single'][data-component-theme='three']
  .reference-card__content
  a:hover,
.card-collection[data-collection-type='single'][data-component-theme='three']
  .reference-card__content
  a:focus {
  color: var(--color-slot-eight);
}

.card-collection[data-collection-type='single'][data-component-theme='four']
  .reference-card__content
  a:hover,
.card-collection[data-collection-type='single'][data-component-theme='four']
  .reference-card__content
  a:focus {
  color: var(--color-slot-seven);
}

.card-collection[data-collection-type='single'][data-component-theme='five']
  .reference-card__content
  a:hover,
.card-collection[data-collection-type='single'][data-component-theme='five']
  .reference-card__content
  a:focus {
  color: var(--color-slot-eight);
}
