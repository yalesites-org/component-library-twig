@use '~@yalesites-org/tokens/build/scss/tokens';
@use '../../00-tokens/functions/map';

:root {
  --size-spacing-site-gutter: var(--size-spacing-5);

  /* The `--spacing-page-section` variable is the larger spacing that is
   * used between "section" components. Components that are "standalone" content
   * like a card grid, or a callout should use this. */
  --spacing-page-section: var(--size-spacing-8);

  /* The `--spacing-page-section-spacious` variable is the largest spacing that is
   * used between select "section" components. These are standalone components 
   * that require even more spacing than others to visually separate it from 
   * surrounding content.
   * Examples: banners, callouts, quicklinks, text-with-image should use this. */
  --spacing-page-section-spacious: var(--size-spacing-10);

  /* The `--spacing-page-inner` variable is the smaller spacing that is used
   * between "content-like" components. It is used between components within a
   * logical section. */
  --spacing-page-inner: var(--size-spacing-7);

  @media (min-width: tokens.$break-m) {
    --size-spacing-site-gutter: var(--size-spacing-6);
  }

  @media (min-width: tokens.$break-l) {
    --size-spacing-site-gutter: var(--size-spacing-7);
    --spacing-page-section: var(--size-spacing-10);
    --spacing-page-section-spacious: var(--size-spacing-12);
  }

  @media (min-width: tokens.$break-xl) {
    --size-spacing-site-gutter: var(--size-spacing-8);
  }

  @media (min-width: tokens.$break-2xl) {
    --size-spacing-site-gutter: var(--size-spacing-10);
  }
}

$layout-widths: map.deep-get(tokens.$tokens, size, component-layout, width);

[data-component-width] {
  &:not([data-embedded-components] [data-component-width]) {
    padding-inline: var(--size-spacing-site-gutter);
  }
}

[class*='__inner'] {
  width: var(--component-width);
  max-width: 100%;
  margin-inline: auto;

  @each $width, $value in $layout-widths {
    [data-component-width='#{$width}'] & {
      --component-width: var(--size-component-layout-width-#{$width});
    }
  }
}

// The spacing-page-inner mixin should be applied to components that are
// "content-like." They generally accompany other components within a "section."
@mixin spacing-page-inner {
  .no-page-spacing + & {
    margin-top: var(--font-spacing-paragraph);
  }

  &:not(.no-page-spacing) {
    margin-bottom: var(--spacing-page-inner);
  }
}

// The spacing-page-section mixin should be applied to components that are
// intended to "stand out" from the components around them. A callout, or a card
// grid, for example, may relate to the text around them, but they're not "part"
// of the text.
@mixin spacing-page-section($flush-bottom: false, $flush-top: false) {
  margin-block: var(--spacing-page-section);

  @if $flush-top == true {
    &:first-child {
      --main-content-top-margin: 0;

      margin-bottom: var(--size-spacing-7);
    }
  }

  @if $flush-bottom == true {
    &:last-child {
      --main-content-bottom-margin: 0;
    }
  }
}

// The spacing-page-section-spacious mixin should be applied to components that are
// intended to "stand out" a bit more from the components around them.
// Examples: banners, callouts, quicklinks, text-with-image
@mixin spacing-page-section-spacious($flush-bottom: false, $flush-top: false) {
  margin-block: var(--spacing-page-section-spacious);

  @if $flush-top == true {
    &:first-child {
      --main-content-top-margin: 0;

      margin-bottom: var(--size-spacing-7);
    }
  }

  @if $flush-bottom == true {
    &:last-child {
      --main-content-bottom-margin: 0;
    }
  }
}
